{% extends 'base.html' %}
{% load static %}

{% block title %}{{ page_title }}{% endblock %}
{% block meta_description %}{{ meta_description }}{% endblock %}

{% block breadcrumb %}
{% comment %} Breadcrumb removido para interface mais limpa {% endcomment %}
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold mb-4">
                    <i class="bi bi-code-slash text-primary me-3" aria-hidden="true"></i>
                    API do BusFeed
                </h1>
                <p class="lead">
                    Integre dados de transporte público de Brasília em suas aplicações 
                    usando nossa API RESTful gratuita e aberta.
                </p>
            </div>

            <!-- Introdução -->
            <div class="row mb-5">
                <div class="col-lg-8 mx-auto">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h4 mb-0">Começando</h2>
                        </div>
                        <div class="card-body">
                            <p>A API do BusFeed fornece acesso programático aos nossos dados de transporte público, incluindo:</p>
                            <ul>
                                <li>Informações de rotas e linhas de ônibus</li>
                                <li>Localizações e facilidades de paradas</li>
                                <li>Horários programados e em tempo real</li>
                                <li>Dados de acessibilidade</li>
                            </ul>
                            
                            <div class="alert alert-info mt-3">
                                <i class="bi bi-info-circle me-2" aria-hidden="true"></i>
                                <strong>API em Desenvolvimento:</strong> Nossa API está sendo desenvolvida e estará disponível em breve. 
                                Esta documentação está sendo atualizada constantemente.
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- URL Base -->
            <div class="row mb-4">
                <div class="col-lg-8 mx-auto">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h5 mb-0">URL Base</h2>
                        </div>
                        <div class="card-body">
                            <code class="d-block p-3 bg-light rounded">https://api.busfeed.df.gov.br/v1/</code>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Autenticação -->
            <div class="row mb-4">
                <div class="col-lg-8 mx-auto">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h5 mb-0">Autenticação</h2>
                        </div>
                        <div class="card-body">
                            <p>A API do BusFeed é gratuita e não requer autenticação para a maioria dos endpoints públicos.</p>
                            <p>Para endpoints que requerem autenticação, utilize um token API no cabeçalho:</p>
                            <pre class="bg-light p-3 rounded"><code>Authorization: Bearer SEU_TOKEN_AQUI</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Endpoints -->
            <div class="row mb-4">
                <div class="col-lg-12">
                    <h2 class="h3 mb-4">Endpoints Disponíveis</h2>
                    
                    <!-- Rotas -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3 class="h5 mb-0">
                                <i class="bi bi-map text-primary me-2" aria-hidden="true"></i>
                                Rotas
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Método</th>
                                            <th>Endpoint</th>
                                            <th>Descrição</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span class="badge bg-success">GET</span></td>
                                            <td><code>/routes</code></td>
                                            <td>Lista todas as rotas ativas</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-success">GET</span></td>
                                            <td><code>/routes/{id}</code></td>
                                            <td>Detalhes de uma rota específica</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-success">GET</span></td>
                                            <td><code>/routes/search</code></td>
                                            <td>Buscar rotas por origem e destino</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Paradas -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3 class="h5 mb-0">
                                <i class="bi bi-geo-alt text-info me-2" aria-hidden="true"></i>
                                Paradas
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Método</th>
                                            <th>Endpoint</th>
                                            <th>Descrição</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span class="badge bg-success">GET</span></td>
                                            <td><code>/stops</code></td>
                                            <td>Lista todas as paradas</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-success">GET</span></td>
                                            <td><code>/stops/{id}</code></td>
                                            <td>Detalhes de uma parada específica</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-success">GET</span></td>
                                            <td><code>/stops/nearby</code></td>
                                            <td>Paradas próximas a uma coordenada</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Horários -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3 class="h5 mb-0">
                                <i class="bi bi-clock text-warning me-2" aria-hidden="true"></i>
                                Horários
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Método</th>
                                            <th>Endpoint</th>
                                            <th>Descrição</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span class="badge bg-success">GET</span></td>
                                            <td><code>/schedules/route/{id}</code></td>
                                            <td>Horários de uma rota</td>
                                        </tr>
                                        <tr>
                                            <td><span class="badge bg-success">GET</span></td>
                                            <td><code>/realtime/stop/{id}</code></td>
                                            <td>Próximos ônibus em uma parada</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Exemplo de Resposta -->
            <div class="row mb-4">
                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h5 mb-0">Exemplo de Resposta</h2>
                        </div>
                        <div class="card-body">
                            <p>Exemplo de resposta para <code>GET /routes/123</code>:</p>
                            <pre class="bg-light p-3 rounded"><code>{
  "id": "123",
  "number": "108",
  "name": "Rodoviária ↔ W3 Sul",
  "type": "convencional",
  "company": "Viação Pioneira",
  "operating": {
    "weekdays": true,
    "saturdays": true,
    "sundays": false
  },
  "accessibility": {
    "wheelchair_accessible": true,
    "audio_announcements": true
  },
  "first_departure": "05:00",
  "last_departure": "23:30",
  "frequency": 15,
  "fare": 5.50,
  "stops": [
    {
      "id": "456",
      "name": "Rodoviária do Plano Piloto",
      "sequence": 1
    }
  ]
}</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SDKs e Bibliotecas -->
            <div class="row mb-4">
                <div class="col-lg-8 mx-auto">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h5 mb-0">SDKs e Bibliotecas</h2>
                        </div>
                        <div class="card-body">
                            <p>Estamos desenvolvendo SDKs oficiais para facilitar a integração:</p>
                            <ul>
                                <li><strong>Python:</strong> <code>pip install busfeed-api</code> (em breve)</li>
                                <li><strong>JavaScript/Node.js:</strong> <code>npm install busfeed-api</code> (em breve)</li>
                                <li><strong>PHP:</strong> Composer package (em breve)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Rate Limiting -->
            <div class="row mb-4">
                <div class="col-lg-8 mx-auto">
                    <div class="card">
                        <div class="card-header">
                            <h2 class="h5 mb-0">Limites de Taxa</h2>
                        </div>
                        <div class="card-body">
                            <p>Para garantir a qualidade do serviço, aplicamos os seguintes limites:</p>
                            <ul>
                                <li><strong>Usuários anônimos:</strong> 100 requisições por hora</li>
                                <li><strong>Usuários autenticados:</strong> 1.000 requisições por hora</li>
                                <li><strong>Parceiros:</strong> Limites customizados</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Suporte -->
            <div class="row">
                <div class="col-lg-8 mx-auto">
                    <div class="card bg-light">
                        <div class="card-body text-center">
                            <h3 class="h5 mb-3">Precisa de Ajuda?</h3>
                            <p class="mb-3">
                                Nossa equipe está pronta para ajudar desenvolvedores a integrar 
                                nossa API em seus projetos.
                            </p>
                            <div class="d-flex flex-wrap justify-content-center gap-3">
                                <a href="{% url 'core:contact' %}" class="btn btn-primary">
                                    <i class="bi bi-envelope me-2" aria-hidden="true"></i>
                                    Suporte Técnico
                                </a>
                                <a href="https://github.com/busfeed/api-docs" class="btn btn-outline-primary" target="_blank">
                                    <i class="bi bi-github me-2" aria-hidden="true"></i>
                                    GitHub
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 